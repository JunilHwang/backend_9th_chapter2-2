## Checklist

- [X] 요구사항을 구체화하고 분석하여 작업 가능한 단위로 정리하였는가?
  - [요구사항 구체화](./docs/1_requirement_spec.md)
- [X] 비즈니스 요구사항을 충족하는 ERD가 작성되었는가?
  - [ERD 작성](./docs/3_erd.md)
  - [ERD 개선 셀프 피드백](./docs/3_erd_self-feedback.md)
- [X] 핵심 기능에 대한 시퀀스 다이어그램이 작성되었는가?
  - [사용자 시나리오와 시퀀스 다이어그램](./docs/2_sequence_diagram_with_scenario.md)
- [X] REST 규칙에 따라서 API를 문서화하였는가?
  - [API 스펙 문서화](./docs/4_api_spec.md)
- [X] 더미데이터를 제공하는 Mock API를 작성하였는가?

## Description

- `e-커머스 상품 주문 서비스`를 구현해 봅니다.
- 상품 주문에 필요한 메뉴 정보들을 구성하고 조회가 가능해야 합니다.
- 사용자는 상품을 여러개 선택해 주문할 수 있고, 미리 충전한 잔액을 이용합니다.
- 상품 주문 내역을 통해 판매량이 가장 높은 상품을 추천합니다.

## Requirements

- 아래 5가지 API 를 구현합니다.
  - [ ] 잔액 충전 / 조회 API
  - [ ] 상품 조회 API
  - [ ] 주문 / 결제 API
  - [ ] 선착순 쿠폰 API
  - [ ] 인기 판매 상품 조회 API

### 아키텍처 설계 및 핵심 기능 구현 

- [ ] 선택한 아키텍처 패턴을 일관되게 적용하고, 계층별 책임이 명확히 분리되었는지
- [ ] 의존성이 단방향으로 흐르며, DI를 통한 의존성 주입이 구현되었는지
- [ ] 각 시나리오별 필수 기능이 구현되었는지
- [ ] 상품 조회, 주문/결제, 포인트 충전
- [ ] 핵심 비즈니스 로직이 Service/Domain 계층에 위치하고, 외부 기술로부터 분리되었는지
- [ ] 단위 테스트가 대상 객체/기능에 대한 의존성만 가지고 Mock/Stub을 활용하여 작성되었는지

### 고급 기능 구현 및 리팩토링

- [ ] 선착순 쿠폰 기능 , 재고 동시성 제어 (동시 주문 시 정확한 재고 차감) , 결제 실패 시 재고 복구 처리
- [ ] 동시성 제어가 적절히 구현되고, 관련 테스트가 작성되었는지
- [ ] 트랜잭션 처리 전략이 명확하고, 실패 시 보상 트랜잭션이 구현되었는지
- [ ] 이벤트 기반 처리 또는 비동기 처리가 적절한 곳에 적용되었는지
- [ ] 기존 아키텍처의 문제점을 파악하고 개선했는지
- [ ] 단위 테스트가 대상 객체/기능에 대한 의존성만 가지고 작성되었는지

## API Specs

### 기본과제

1️⃣ **`주요`** **잔액 충전 / 조회 API**

- [ ] 결제에 사용될 금액을 충전하는 API 를 작성합니다.
- [ ] 사용자 식별자 및 충전할 금액을 받아 잔액을 충전합니다.
- [ ] 사용자 식별자를 통해 해당 사용자의 잔액을 조회합니다.

2️⃣ **`기본` 상품 조회 API**

- [ ] 상품 정보 ( ID, 이름, 가격, 잔여수량 ) 을 조회하는 API 를 작성합니다.
- [ ] 조회시점의 상품별 잔여수량이 정확하면 좋습니다.

3️⃣ **`주요` 선착순 쿠폰 기능**

- [ ] 선착순 쿠폰 발급 API 및 보유 쿠폰 목록 조회 API 를 작성합니다.
- [ ] 사용자는 선착순으로 할인 쿠폰을 발급받을 수 있습니다.
- [ ] 주문 시에 유효한 할인 쿠폰을 함께 제출하면, 전체 주문금액에 대해 할인 혜택을 부여받을 수 있습니다.

4️⃣ **`주요`** **주문 / 결제 API**

- [ ] 사용자 식별자와 (상품 ID, 수량) 목록을 입력받아 주문하고 결제를 수행하는 API 를 작성합니다.
- [ ] 결제는 기 충전된 잔액을 기반으로 수행하며 성공할 시 잔액을 차감해야 합니다.
- [ ] 데이터 분석을 위해 결제 성공 시에 실시간으로 주문 정보를 데이터 플랫폼에 전송해야 합니다. ( 데이터 플랫폼이 어플리케이션 `외부` 라는 가정만 지켜 작업해 주시면 됩니다 )

> 데이터 플랫폼으로의 전송 기능은 Mock API, Fake Module 등 다양한 방법으로 접근해 봅니다.

5️⃣ **`기본` 상위 상품 조회 API**

- [ ] 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공하는 API 를 작성합니다.
- [ ] 통계 정보를 다루기 위한 기술적 고민을 충분히 해보도록 합니다.

---

💡 **KEY POINT**

- 동시에 여러 주문이 들어올 경우, 유저의 보유 잔고에 대한 처리가 정확해야 합니다.
- 각 상품의 재고 관리가 정상적으로 이루어져 잘못된 주문이 발생하지 않도록 해야 합니다.
